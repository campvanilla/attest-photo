const l=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}};l();const c=document.getElementById("image-upload-form"),i=document.getElementById("workspace-canvas");function d(r){return new Promise((o,s)=>{const n=new FileReader;n.onload=function(){if(n.result){const e=new Blob([n.result]),t=URL.createObjectURL(e);o(t)}else s()},n.readAsArrayBuffer(r)})}async function f(r){const o=r.image,s=await d(o);if(i.getContext){const n=i.getContext("2d"),e=new Image;e.src=s,e.onload=function(){n&&(i.width=e.width,i.height=e.height,n.drawImage(e,0,0))}}}c==null||c.addEventListener("submit",r=>{if(r.preventDefault(),r.target){const o=new FormData(r.target),s={image:o.get("image"),attestationText:o.get("attestation-text")};f(s)}});
